g + geom_histogram(aes(fill=species))
g + geom_histogram(aes(colour=species,weight=5))
g + geom_histogram(aes(colour=species))
g + geom_histogram(aes(colour=pink))
g + geom_histogram(aes(colour="pink"))
g + geom_histogram(aes(fill="pink"))
g + geom_histogram(aes(fill="pink"))+geom_line()
g + geom_histogram(aes(fill="pink"))+geom_line(aes(y=petal.length))
h <- ggplot(iris,aes(x=sepal.length,y=petal.length))
h+geom_point()
?geom_point
h+geom_point(aes(color=species))
?geom_point
h+geom_point(aes(color=species,alpha=0.5))
?geom_point
h+geom_point(aes(color=species,size=2.5))
h+geom_point(aes(color=species,size=species))
head(mtcars)
head(french_fries)
table(french_fries$time)
ff <- french_fries
ff_dat <- summarise(group_by(ff,time),mean(potato))
head(ff_dat)
tim <- 1:696
head(tim)
cbind(ff,tim)
ff <- cbind(ff,tim)
str(ff)
head(ff)
f <- ggplot(ff,aes(x=tim,y=potato))
f + geom_line()
f <- ggplot(ff,aes(x=tim,y=rancid))
f + geom_line()
f <- ggplot(ff,aes(x=tim,y=rep))
f + geom_line()
head(runif(696,4,6))
rand <- runif(696,4,6)
ff <- cbind(ff,rand)
rand <- runif(696,4,6)
head(ff)
f <- ggplot(ff,aes(x=tim,y=rand))
f + geom_line()
f <- ggplot(ff,aes(x=tim[50,],y=rand[50,]))
f + geom_line()
f <- ggplot(ff,aes(x=tim[1:50],y=rand[1:50]))
f + geom_line()
tim[1:10]
f <- ggplot(ff[1:50,],aes(x=tim[1:50],y=rand[1:50]))
f + geom_line()
f + geom_line(aes(colour=rep))
table(ff$rep)
class(ff$rep)
ff$rep <- as.factor(ff$rep)
f <- ggplot(ff[1:50,],aes(x=tim[1:50],y=rand[1:50]))
f + geom_line(aes(colour=rep))
f + geom_line(aes(colour=rep))+facet_grid(rep~.)
f + geom_line(aes(colour=rep))+facet_grid(.~rep)
f + geom_line(aes(colour=rep))+facet_grid(rep~.)
f + geom_line(aes(colour=rep))+facet_grid(rep~.)+ggtitle("My First GGPlot")
f + geom_line(aes(colour=rep))+facet_grid(rep~.)+ggtitle("My First GGPlot")+xlab=("time")+ylab=("Random Number")
f + geom_line(aes(colour=rep))+facet_grid(rep~.)+ggtitle("My First GGPlot")+xlab("time")+ylab("Random Number")
h+geom_point(aes(color=species))
h+geom_point(aes(color=species))+geom_smooth(method="lm")
h+geom_point(aes(color=species))+geom_smooth(method="lm", se=FALSE)
h+geom_point(aes(color=species))+geom_smooth(method="lm", se=FALSE,colour=species)
h+geom_point(aes(color=species))+geom_smooth(method="lm", se=FALSE,aes(colour=species)
)
data <- read.table("air.csv",sep="\t",header=TRUE)
?read.table
head(data)
View(data)
str(data)
?arrange
names(data)
names(data) <- tolower(names(data))
names(data)
head(arrange(data,market))
data <- arrange(data,market)
View(data)
?melt
head(melt(data,id.vars="market"))
head(melt(data,id.vars=c("market","metric"))
)
head(data)
data <- read.table("air.csv",sep="\t",header=TRUE,na.strings="")
head(data)
View(data)
names(data) <- tolower(names(data))
data <- arrange(data,market)
head(data)
head(melt(data,id.vars=c("market","metric"))
)
head(melt(data,id.vars=c("market","metric")),15)
data <- melt(data,id.vars=c("market","metric"))
head(data)
dcast(data,market + variable ~ metric)
data <- dcast(data,market + variable ~ metric)
head(data)
names(data$variable) <- "month"
names(data)
data$variable
names(data)[2] <- "month"
names(data)
names(data) <- tolower(names(data))
names(data)
data$month
test_date <- data$month
class(test_date)
as.Date(test_date)
as.character(test_date)
test_date <- as.character(test_date)
as.Date(test_date)
?as.Date
as.Date(test_date,format="%b.%y")
as.yearmon(test_date,format="%b.%y")
install.packages("zoo")
library(zoo)
as.yearmon(test_date,format="%b.%y")
class(as.yearmon(test_date,format="%b.%y"))
paste("01.",test_date)
paste("01.",test_date,sep="")
as.Date(paste("01.",test_date,sep=""),format="%d.%b.%y")
fulldate <- as.Date(paste("01.",test_date,sep=""),format="%d.%b.%y")
yrmon <- as.yearmon(test_date,format="%b.%y")
data$month <- as.yearmon(test_date,format="%b.%y")
head(data)
names(data)
names(data) <- c("market","month","active_listings","booking_value","nights_available","nights_booked","nights_occupied","searchers")
names(data)
View(data)
data$nights_avaialble
data$nights_available
str(data)
as.numeric(data$active_listings)
>as.numeric
?as.numeric
as.numeric(sub(",","",data$active_listings))
data$active_listings <- as.numeric(sub(",","",data$active_listings))
names(data)
data$booking_value <- as.numeric(sub(",","",data$booking_value))
data$booking_value
booking_val <- read.table("air.csv",header=TRUE,sep="\t")
head(booking_val)
filter(booking_val,Metric="Booking Value")
filter(booking_val,Metric=="Booking Value")
booking_val <- filter(booking_val,Metric=="Booking Value")
melt("booking_val",id.vars=c("Market","Metric"))
booking_val <- filter(booking_val,Metric=="Booking Value")
head(booking_val)
melt(booking_val,id.vars=c("Market","Metric"))
booking_val <- melt(booking_val,id.vars=c("Market","Metric"))
booking_val <- arrange(booking_val,"Market")
arrange(booking_val,Market)
booking_val <- arrange(booking_val,Market)
booking_val <- booking_val[4]
head(booking_val)
class(booking_val)
booking_val <- as.vector(booking_val)
class(booking_val)
head(booking_val)
?mutate
vector(booking_val)
booking_val <- as.vector(booking_val,mode="numeric")
booking_val <- as.vector(booking_val,mode="character")
head(booking_val)
booking_val <- read.table("air.csv",header=TRUE,sep="\t")
booking_val <- filter(booking_val,Metric=="Booking Value")
booking_val <- arrange(booking_val,Market)
booking_val <- booking_val[4]
head(booking_val)
booking_val <- read.table("air.csv",header=TRUE,sep="\t")
booking_val <- filter(booking_val,Metric=="Booking Value")
booking_val <- melt(booking_val,id.vars=c("Market","Metric"))
head(booking_val)
booking_val <- arrange(booking_val,Market)
head(booking_val)
booking_val <- booking_val[4]
booking <- as.vector(booking_val,mode="character")
head(booking)
head(booking_val)
class(booking_val)
str(booking_val)
unlist(booking_val)
class(unlist(booking_val))
?unlist
class(unlist(booking_val,use.names=FALSE))
unlist(booking_val,use.names=FALSE)
booking_val <- unlist(booking_val,use.names=FALSE)
View(data)
head(mutate(data,booking_val))
data <- mutate(data,booking_val)
data$booking_value <- NULL
names(data)[9] < "booking_value"
names(data)
air_data <- data
View(data)
View(air_data)
gsub(",","",air_data$booking_value)
test <- gsub(",","",air_data$booking_value)
test
data$booking_value
air_data$booking_value
head(data)
head(air_data)
head(as.numeric(gsub(",","",air_data$active_listings)))
head(as.numeric(gsub(",","",air_data$booking_value)))
?gsub
head(gsub(",","",air_data$booking_value))
str(air_data)
gsub(",","",c(21412421,42141,4241414,13213)
)
gsub(",","",c("21412421,42141,4241414,13213")
)
air_data$booking_value <- gsub(",","",air_data$booking_value)
air_data$booking_value
head(air_data$booking_value)
head(air_data$market)
head(air_data)
str(air_data)
head(test_data)
head(test_date)
gsub(".","",test_date)
test_date
sub(".","",test_date)
test_date
sub(".","",test_date)
test <- gsub(",","",air_data$booking_value)
test
test <- gsub(",","",air_data$booking_val)
test
test <- gsub(",","",air_data$nights_available)
test
View(air_data)
air_data$nights_available <- as.numeric(gsub(",","",air_data$nights_available))
air_data$nights_booked <- as.numeric(gsub(",","",air_data$nights_booked))
air_data$nights_occupied <- as.numeric(gsub(",","",air_data$nights_occupied))
air_data$searchers <- as.numeric(gsub(",","",air_data$searchers))
air_data$booking_val <- as.numeric(gsub(",","",air_data$booking_val))
head(air_data)
View(air_data)
graph <- ggplot(air_data,aes(x=month,y=active_listings))
graph + geom_line()
?geom_line
graph <- ggplot(air_data,aes(x=as.factor(month),y=active_listings))
graph + geom_line()
test <- air_data$month
tets
test
as.Date(test)
graph <- ggplot(air_data,aes(x=as.Date(month),y=active_listings))
graph + geom_line()
graph + geom_line(aes(colour=market))
graph + geom_line(aes(colour=market))+theme(legend.position="bottom")
summarise(group_by(air_data,month),fun(active_istings))
summarise(group_by(air_data,month),mean(active_istings))
summarise(group_by(air_data,month),mean(active_listings))
summarise(group_by(air_data,month),sum(active_listings))
summarise(group_by(air_data,market),sum(active_listings))
summarise(group_by(air_data,market,month),sum(active_listings))
summarise(group_by(air_data,market,year(month),sum(active_listings))
summarise(group_by(air_data,market,year(month)),sum(active_listings))
library(lubridate)
summarise(group_by(air_data,market,year(month)),sum(active_listings))
graph <- ggplot(air_data[air_data$market=="Brian-Ville",],aes(x=as.Date(month),y=active_listings))
graph + geom_line(aes(colour=market))+theme(legend.position="bottom")
graph_all <- ggplot(air_data,aes(x=as.Date(month),y=active_listings))
graph_all + geom_line(aes(colour=market))+theme(legend.position="bottom")
graph + geom_line(aes(colour=market))+theme(legend.position="bottom")
graph + geom_line(aes(colour=market))+geom_bar(y=searchers)+theme(legend.position="bottom")
graph + geom_line(aes(colour=market))+geom_bar(aes(y=searchers))+theme(legend.position="bottom")
graph + geom_line(aes(colour=market))+geom_bar(aes(x=as.Date(month),y=searchers))+theme(legend.position="bottom")
graph + geom_line(aes(colour=market))+geom_bar(aes(x=as.Date(month),y=searchers),stat="identity")+theme(legend.position="bottom")
head(air_data)
melt(air_data,id.vars=c("market","month"))
air_data_melt <- melt(air_data,id.vars=c("market","month"))
baseplot <- ggplot(air_data_melt,aes(x=as.Date(month),y=value)
)
baseplot + facet_grid(variable~., scales='free')
baseplot + facet_grid(variable~., scales='free') + geom_line(subset=.(variable=="active_listings"))
library(plyr)
library(dplyr)
baseplot + facet_grid(variable~., scales='free') + geom_line(subset=.(variable=="active_listings"))
air_data_melt <- filter(air_data_melt,variable==c("active_listings","nights_booked"))
head(air_data_melt)
baseplot <- ggplot(air_data_melt,aes(x=as.Date(month),y=value))
baseplot + facet_grid(variable~., scales='free') + geom_line(subset=.(variable=="active_listings"))
baseplot + facet_grid(variable~., scales='free') + geom_line(subset=.(variable=="active_listings"),colour=market)
baseplot + facet_grid(variable~., scales='free') + geom_line(subset=.(variable=="active_listings"),aes(colour=market))
baseplot + facet_grid(variable~., scales='free') + geom_line(subset=.(variable=="active_listings"),aes(colour=market)) + geom_line(subset=.(variable=="nights_booked"),aes(colour=market))
baseplot <- ggplot(filter(air_data_melt,market="Brian-Ville"),aes(x=as.Date(month),y=value))
baseplot <- ggplot(filter(air_data_melt,market=="Brian-Ville"),aes(x=as.Date(month),y=value))
baseplot + facet_grid(variable~., scales='free') + geom_line(subset=.(variable=="active_listings"),aes(colour=market)) + geom_line(subset=.(variable=="nights_booked"),aes(colour=market))
air_data_melt <- filter(air_data_melt,variable==c("searchers","nights_booked"))
air_data_melt <- melt(air_data,id.vars=c("market","month"))
air_data_melt <- filter(air_data_melt,variable==c("searchers","nights_booked"))
baseplot <- ggplot(filter(air_data_melt,market=="Brian-Ville"),aes(x=as.Date(month),y=value))
baseplot + facet_grid(variable~., scales='free') + geom_line(subset=.(variable=="active_listings"),aes(colour=market)) + geom_line(subset=.(variable=="nights_booked"),aes(colour=market))
baseplot + facet_grid(variable~., scales='free') + geom_line(subset=.(variable=="searchers"),aes(colour=market)) + geom_line(subset=.(variable=="nights_booked"),aes(colour=market))
ggsave(file="nights_booked_searchers_brian-ville.png")
baseplot + facet_grid(variable~., scales='free') + geom_line(subset=.(variable=="searchers"),aes(colour=market)) + geom_line(subset=.(variable=="nights_booked"),aes(colour=market))
library(ggplot2)
baseplot + facet_grid(variable~., scales='free') + geom_line(subset=.(variable=="searchers"),aes(colour=market)) + geom_line(subset=.(variable=="nights_booked"),aes(colour=market))
library(plyr)
library(dplyr)
baseplot + facet_grid(variable~., scales='free') + geom_line(subset=.(variable=="searchers"),aes(colour=market)) + geom_line(subset=.(variable=="nights_booked"),aes(colour=market))
?lm
fit1 <- lm(Sepal.Length ~ Petal.Width, data = iris)
iris <- iris
fit1 <- lm(Sepal.Length ~ Petal.Width, data = iris)
head(iris)
fit1 <- lm(sepal.length ~ petal.width, data = iris)
summary(fit1)
ggplot(iris, aes(x = Petal.Width, y = Sepal.Length)) +
geom_point() +
stat_smooth(method = "lm", col = "red")
ggplot(iris, aes(x = petal.width, y = sepal.length)) +
geom_point() +
stat_smooth(method = "lm", col = "red")
class(fit1)
names(fit1)
class(fit1$coefficients)
head(fit1$coefficients)
swirl()
library(swirl)
swirl()
rm(list=ls())
search <- read.table("searches.tsv",sep="\t",header=TRUE)
head(search)
head(search)
View(search)
?read.table
search <- read.table("searches.tsv",sep="\t",header=TRUE,quote="\"")
View(search)
contact <- read.table("contacts.tsv",sep="\t",header=TRUE,quote="\"")
View(contact)
View(search)
str(search)
head(as.Date(search$ds_checkin))
sch < search
sch <- search
ct <- contact
sch$ds_checkin <- as.Date(sch$ds_checkin)
str(sch)
sch$ds_checkout <- as.Date(sch$ds_checkout)
head(sch$filter_price_min)
sch$filter_price_min <- as.numeric(sch$filter_price_min)
str(sch)
View(sch)
View(search)
View(sch)
?as.numeric
range(sch$filter_price_min)
range(sch$filter_price_max)
head(sch$filter_price_max)
head(nullToNA((sch$filter_price_max))
)
as.character(sch$filter_price_max)
as.numeric(as.character(sch$filter_price_max))
sch <- search
View(sch)
sch$ds_checkin <- as.Date(sch$ds_checkin)
View(sch)
sch$ds_checkout <- as.Date(sch$ds_checkout)
View(sch)
str(sch)
sch$n_nights <- as.character(sch$n_nights)
head(sch$n_nights)
sch$n_nights <- as.numeric(sch$n_nights)
head(sch$n_nights)
View(sch)
View(search)
View(sch)
range(sch$n_nights)
?range
range(sch$n_nights,na.rm=TRUE)
as.numeric(as.character(sch$filter_price_min))
sch$filter_price_min <- as.numeric(as.character(sch$filter_price_min))
View(sch)
sch$filter_price_max <- as.numeric(as.character(sch$filter_price_max))
View(sch)
str(sch)
head(as.Date(sch$ds))
sch$ds <- as.Date(sch$ds)
str(sch)
as.character(sch$id_user)
sch$id_user <- as.character(sch$id_user)
str(sch)
sch$origin_countryr <- as.character(sch$origin_country)
View(sch)
sch$origin_country <- as.character(sch$origin_country)
sch$origin_countryr <- NULL
sch$filter_room_types <- as.character(sch$filter_room_types)
sch$filter_neighborhoods <- as.character(sch$filter_neighborhoods)
str(sch)
View(sch)
View(sch)
View(ct)
str(ct)
ct$id_guest <- as.character(ct$id_guest)
str(ct)
?as.POSIXct
ct$id_host <- as.character(ct$id_host)
ct$id_listing <- as.character(ct$id_listing)
str(ct)
head(as.character(ct$ts_contact_at))
head(as.POSIXct(as.character(ct$ts_contact_at),"%Y-%m-%d %H:%M-%S.0"))
head(as.POSIXct(as.character(ct$ts_contact_at),"%Y-%m-%d %H:%M-%S"))
head(as.Date(as.character(ct$ts_contact_at)))
ct$contact_at <- as.Date(as.character(ct$ts_contact_at))
head(as.Date(as.character(ct$ts_reply_at)))
ct$reply_at <- as.Date(as.character(ct$ts_reply_at))
ct$accepted_at <- as.Date(as.character(ct$ts_accepted_at))
ct$booking_at <- as.Date(as.character(ct$ts_booking_at))
str(ct)
ct$ds_checkin <- as.Date(as.character(ct$ds_checkin))
View(ct)
ct$ds_checkout <- as.Date(as.character(ct$ds_checkout))
str(ct)
View(sch)
length(sch$id_user)
View(ct)
View(sch)
library(plyr)
library(dplyr)
library(lubridate)
library(stringr)
library(zoo)
library(reshape2)
library(ggplot2)
table(sch$ds)
View(ct)
View(sch)
View(ct)
table(ct$contact_at)
View(search)
table(search$ds)
table(ct$booking_at)
summarise(group_by(sch,ds),n_distinct(id_user))
test_country <- sch[,c(1,2,9)]
head(test_country
)
summarise(group_by(test_country,ds,origin_country),n_distinct(id_user))
test_country <- summarise(group_by(test_country,ds,origin_country),n_distinct(id_user))
names(test_country)[3] <- "user_ct"
head(test_country)
g <- ggplot(test_country,aes(x=ds,y=user_ct))
g + geom_line(aes(colour=origin_country))
head(test_country)
arrange(test_country,ds,origin_country,desc(user_ct))
arrange(test_country,ds,desc(user_ct))
dcast(test_country,origin_country~ds,fun.aggregate=sum)
dcast(test_country,origin_country~ds,fun.aggregate=sum)
arrange(test_country,ds,desc(user_ct))
write.table(sch,"sch.csv",sep=",")
write.table(ct,"ct.csv",sep=",")
?summarise
summarise(group_by(test_country,ds,origin_country),n_distinct(id_user))
summarise(group_by(sch,ds),mean(N_nights))
summarise(group_by(sch,ds),mean(n_nights))
summarise(group_by(sch,ds),mean(n_nights),na.rm=TRUE)
test_nnights <- sch[,c(1,2,6)]
head(test_nnights)
head(test_nnights[!is.na(n_nights),])
head(test_nnights[!is.na(test_nnights$n_nights),])
test_nnights <- test_nnights[!is.na(test_nnights$n_nights),]
summarise(group_by(test_nnights,ds),mean(n_nights))
table(test_nnights$n_nights)
?quantile
quantile(test_nnights$n_nights)
as.Date("2014-10-09") - as.Date("2014-10-01")
diff <- as.Date("2014-10-09") - as.Date("2014-10-01")
diff
mydata <- clean()
source("run_analysis.R")
getwd()
setwd("/Users/kwokmun/uci_dataset")
source("run_analysis.R")
mydata <- clean()
source("run_analysis.R")
mydata <- clean()
install.packages("dplyr")
cat("hello","world",sep="\n")
mydata <- clean()
name <- names(mydata)
names(mydata)
cat(name,sep="\n")
cat("avg_of",name,sep="_")
cat("avg.of",name,sep="xxx")
paste("avg.of",name,sep="xxx")
?paste
paste("pastethis","hello","world",sep="xxx")
cat("pastethis","hello","world",sep="xxx")
vec <- c("one","two","three")
paste("pastethis",vec,sep="xxx")
cat("pastethis",vec,sep="xxx")
catvec <- cat("pastethis",vec,sep="xxx")
?cat
paste(vec,sep="xxx")
paste(vec,collapse="")
paste(vec,collapse="xxx")
source("run_analysis.R")
mydata <- clean()
View(mydata)
names(mydata)
?paste
source("run_analysis.R")
mydata <- clean()
names(mydata)
name <- names(mydata)
cat(name,sep="\n")
xtrain <- read.table("X_train.txt")
xtest <- read.table("X_test.txt")
